AM_CFLAGS = -std=c89 -O2 -flto
AM_LDFLAGS = -flto

if DEBUG
# warnings
AM_CFLAGS += -pedantic -Wall -Wfloat-equal -Wbad-function-cast -Wshadow -Wpointer-arith -Wcast-qual -Wstrict-prototypes -Wdeclaration-after-statement -Wuninitialized -Werror -Wstrict-overflow=5 -Wextra -Wno-unused-parameter -Wfatal-errors

AM_CFLAGS += -D_FORIFY_SOURCE=2 -Wformat -Wformat-security
# AM_LDADD += -pie -fPIE -Wl,-z,relro -Wl,-z,now -fstack-protector

# debug
AM_CFLAGS += -g
AM_LDFLAGS += -g
endif

if PROFILE
AM_CFLAGS += -pg
AM_LDFLAGS += -pg
endif

AM_CFLAGS += $(DEPS_CFLAGS)


